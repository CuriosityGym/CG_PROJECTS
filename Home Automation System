#include "DHT.h"

#define LDR_PIN A0
#define PIR_PIN 2
#define LIGHT_RELAY_PIN 3
#define DHT_PIN 4
#define FAN_RELAY_PIN 5

#define DHTTYPE DHT11
#define LIGHT_THRESHOLD 500
#define TEMP_THRESHOLD 25

DHT dht(DHT_PIN, DHTTYPE);

void setup() {
  pinMode(LDR_PIN, INPUT);
  pinMode(PIR_PIN, INPUT);
  pinMode(LIGHT_RELAY_PIN, OUTPUT);
  pinMode(FAN_RELAY_PIN, OUTPUT);
  dht.begin();
  Serial.begin(9600);
}

void loop() {
  int ldrValue = analogRead(LDR_PIN);
  int pirValue = digitalRead(PIR_PIN);
  float temp = dht.readTemperature();
  float humidity = dht.readHumidity();

  if (ldrValue < LIGHT_THRESHOLD || pirValue == HIGH) {
    digitalWrite(LIGHT_RELAY_PIN, HIGH); // Turn on the light
  } else {
    digitalWrite(LIGHT_RELAY_PIN, LOW); // Turn off the light
  }

  if (temp > TEMP_THRESHOLD) {
    digitalWrite(FAN_RELAY_PIN, HIGH); // Turn on the fan
  } else {
    digitalWrite(FAN_RELAY_PIN, LOW); // Turn off the fan
  }

  Serial.print("LDR Value: ");
  Serial.print(ldrValue);
  Serial.print(", PIR Value: ");
  Serial.print(pirValue);
  Serial.print(", Temperature: ");
  Serial.print(temp);
  Serial.print(" Â°C, Humidity: ");
  Serial.print(humidity);
  Serial.println(" %");

  delay(1000); // Adjust the delay as needed
}
